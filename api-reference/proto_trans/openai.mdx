# åè®®è½¬æ¢

TokenOPS.AI æä¾›äº†OpenAIåè®®çš„å…¼å®¹å±‚ï¼Œä½¿æ‚¨èƒ½å¤Ÿä½¿ç”¨OpenAI SDKæ¥æµ‹è¯•Claudeå’ŒGeminiæ¨¡å‹ã€‚é€šè¿‡å°‘é‡ä»£ç æ›´æ”¹ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿè¯„ä¼°ä¸åŒæ¨¡å‹çš„èƒ½åŠ›ã€‚

## å¿«é€Ÿå¼€å§‹

è¦ä½¿ç”¨OpenAI SDKå…¼å®¹åŠŸèƒ½ï¼Œæ‚¨éœ€è¦ï¼š

1. ä½¿ç”¨å®˜æ–¹OpenAI SDK
2. æ›´æ”¹ä»¥ä¸‹é…ç½®ï¼š
   - æ›´æ–°base URLæŒ‡å‘TokenOPS.AI API
   - ä½¿ç”¨æ‚¨çš„TokenOPS.AI APIå¯†é’¥
   - æ›´æ–°æ¨¡å‹åç§°ä¸ºClaudeæˆ–Geminiæ¨¡å‹

### ç¤ºä¾‹ä»£ç 

```python
from openai import OpenAI

client = OpenAI(
    api_key="YOUR_TOKENOPS_API_KEY",  # æ‚¨çš„TokenOPS.AI APIå¯†é’¥
    base_url="https://api.tokenops.ai/v1/"  # TokenOPS.AI APIç«¯ç‚¹
)

# ä½¿ç”¨Claudeæ¨¡å‹
response = client.chat.completions.create(
    model="claude-3-5-sonnet-20241022",
    messages=[
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "Who are you?"}
    ],
)

# ä½¿ç”¨Geminiæ¨¡å‹
response = client.chat.completions.create(
    model="gemini-2.5-flash",
    messages=[
        {"role": "user", "content": "Hello, world!"}
    ],
)
```

## åè®®å­—æ®µæ˜ å°„è¡¨

### è¯·æ±‚å­—æ®µæ˜ å°„

| OpenAIå­—æ®µ | Claudeå­—æ®µ | Geminiå­—æ®µ | æ”¯æŒçŠ¶æ€ | è¯´æ˜ |
|------------|------------|------------|----------|------|
| **åŸºç¡€å­—æ®µ** |
| `model` | `model` | `æ¥å£è·¯å¾„å‚æ•°model` | âœ… å®Œå…¨æ”¯æŒ | ä½¿ç”¨ç›¸åº”å‚å•†çš„æ¨¡å‹åç§° |
| `messages` | `messages` | `generationConfig.contents` | âœ… å®Œå…¨æ”¯æŒ | æ¶ˆæ¯æ ¼å¼è½¬æ¢ï¼Œè¯¦è§ä¸‹è¡¨ |
| `max_completion_tokens` | `max_tokens` | `generationConfig.maxOutputTokens` | âœ… å®Œå…¨æ”¯æŒ | æœ€å¤§è¾“å‡ºtokenæ•° |
| `temperature` | `temperature` | `generationConfig.temperature` | âœ… å®Œå…¨æ”¯æŒ | Claude: 0-1, Gemini: 0-2 |
| `top_p` | `top_p` | `generationConfig.topP` | âœ… å®Œå…¨æ”¯æŒ | æ ¸é‡‡æ ·å‚æ•° |
| `stream` | `stream` | `æµå¼æ¥å£` | âœ… å®Œå…¨æ”¯æŒ | æµå¼å“åº” |
| **æ§åˆ¶å‚æ•°** |
| `stop` | `stop_sequences` | `generationConfig.stopSequences` | âœ… å®Œå…¨æ”¯æŒ | åœæ­¢åºåˆ— |
| `n` | âŒ ä¸æ”¯æŒ | `generationConfig.candidateCount` | ğŸ”¸ éƒ¨åˆ†æ”¯æŒ | Claudeä¸æ”¯æŒï¼ŒGeminiæ”¯æŒ |
| `presence_penalty` | âŒ ä¸æ”¯æŒ | `generationConfig.presencePenalty` | ğŸ”¸ éƒ¨åˆ†æ”¯æŒ | Claudeä¸æ”¯æŒï¼ŒGeminiæ”¯æŒ |
| `frequency_penalty` | âŒ ä¸æ”¯æŒ | `generationConfig.frequencyPenalty` | ğŸ”¸ éƒ¨åˆ†æ”¯æŒ | Claudeä¸æ”¯æŒï¼ŒGeminiæ”¯æŒ |
| `logit_bias` | âŒ å¿½ç•¥ | âŒ å¿½ç•¥ | âŒ ä¸æ”¯æŒ | ä¸¤ä¸ªå‚å•†éƒ½ä¸æ”¯æŒ |
| `logprobs` | âŒ å¿½ç•¥ | `generationConfig.logprobs` | âœ… å®Œå…¨æ”¯æŒ | ä¸¤ä¸ªå‚å•†éƒ½ä¸æ”¯æŒ |
| `seed` | âŒ å¿½ç•¥ | `generationConfig.seed` | âœ… å®Œå…¨æ”¯æŒ | ä¸¤ä¸ªå‚å•†éƒ½ä¸æ”¯æŒ |
| **å·¥å…·è°ƒç”¨** |
| `tools` | `tools` | `tools` | âœ… å®Œå…¨æ”¯æŒ | å‡½æ•°è°ƒç”¨å·¥å…·å®šä¹‰ |
| `tool_choice` | `tool_choice` | `toolConfig` | âœ… å®Œå…¨æ”¯æŒ | å·¥å…·é€‰æ‹©ç­–ç•¥ |
| `parallel_tool_calls` | âœ… æ”¯æŒ | âœ… æ”¯æŒ | âœ… å®Œå…¨æ”¯æŒ | å¹¶è¡Œå·¥å…·è°ƒç”¨ |
| **æ ¼å¼åŒ–è¾“å‡º** |
| `response_format` | âŒ è½¬æ¢ä¸ºå·¥å…·è°ƒç”¨ | `generationConfig.responseMimeType`<br/>`generationConfig.responseSchema` | âœ… å®Œå…¨æ”¯æŒ | Claudeé€šè¿‡å·¥å…·è°ƒç”¨å®ç°ï¼ŒGeminiåŸç”Ÿæ”¯æŒ |
| **æ¨ç†èƒ½åŠ›** |
| `reasoning_effort` | `thinking` | `thinkingConfig` | âœ… å®Œå…¨æ”¯æŒ | æ¨ç†èƒ½åŠ›æ§åˆ¶ |
| **å…ƒæ•°æ®** |
| `metadata` | `metadata` | âŒ å¿½ç•¥ | ğŸ”¸ éƒ¨åˆ†æ”¯æŒ | Claudeæ”¯æŒï¼ŒGeminiä¸æ”¯æŒ |
| `user` | âŒ å¿½ç•¥ | âŒ å¿½ç•¥ | âŒ ä¸æ”¯æŒ | ç”¨äºè·Ÿè¸ªç”¨æˆ·ID |

### æ¶ˆæ¯æ ¼å¼æ˜ å°„

| OpenAIæ¶ˆæ¯æ ¼å¼ | Claudeæ¶ˆæ¯æ ¼å¼ | Geminiæ¶ˆæ¯æ ¼å¼ | æ”¯æŒçŠ¶æ€ |
|----------------|----------------|----------------|----------|
| **è§’è‰²æ˜ å°„** |
| `system` | åˆå¹¶åˆ°ç³»ç»Ÿæç¤º | ç³»ç»ŸæŒ‡ä»¤ | âœ… å®Œå…¨æ”¯æŒ |
| `developer` | åˆå¹¶åˆ°ç³»ç»Ÿæç¤º | ç³»ç»ŸæŒ‡ä»¤ | âœ… å®Œå…¨æ”¯æŒ |
| `user` | `user` | `user` | âœ… å®Œå…¨æ”¯æŒ |
| `assistant` | `assistant` | `model` | âœ… å®Œå…¨æ”¯æŒ |
| `tool` | `user` | `user` | âœ… å®Œå…¨æ”¯æŒ |
| **å†…å®¹ç±»å‹** |
| æ–‡æœ¬å†…å®¹ | `text` | `text` | âœ… å®Œå…¨æ”¯æŒ |
| å›¾åƒå†…å®¹ | `image` | `inlineData` | âœ… å®Œå…¨æ”¯æŒ |
| æ–‡ä»¶å†…å®¹ | âŒ å¿½ç•¥ | `fileData/inlineData` | ğŸ”¸ éƒ¨åˆ†æ”¯æŒ |
| è§†é¢‘å†…å®¹ | âŒ å¿½ç•¥ | `inlineData` | ğŸ”¸ éƒ¨åˆ†æ”¯æŒ |
| éŸ³é¢‘å†…å®¹ | âŒ å¿½ç•¥ | `inlineData` | ğŸ”¸ éƒ¨åˆ†æ”¯æŒ |

### å“åº”å­—æ®µæ˜ å°„

| OpenAIå­—æ®µ | Claudeå­—æ®µ | Geminiå­—æ®µ | æ”¯æŒçŠ¶æ€ |
|------------|------------|------------|----------|
| `id` | è¯·æ±‚id | è¯·æ±‚id | âœ… å®Œå…¨æ”¯æŒ |
| `object` | å›ºå®šå€¼ | å›ºå®šå€¼ | âœ… å®Œå…¨æ”¯æŒ |
| `created` | å“åº”æ—¶é—´æˆ³ | å“åº”æ—¶é—´æˆ³ | âœ… å®Œå…¨æ”¯æŒ |
| `model` | å¹³å°æ¨¡å‹å | å¹³å°æ¨¡å‹å | âœ… å®Œå…¨æ”¯æŒ |
| `choices[].message.role` | `role` | `candidates[].content.role` | âœ… å®Œå…¨æ”¯æŒ |
| `choices[].message.content` | `content[].text` | `candidates[].content.parts.text` | âœ… å®Œå…¨æ”¯æŒ |
| `choices[].message.tool_calls` | `content[].tool_use` | `candidates[].content.parts[].functionCall` | âœ… å®Œå…¨æ”¯æŒ |
| `choices[].finish_reason` | `stop_reason` | `candidates[].finishReason` | âœ… å®Œå…¨æ”¯æŒ |
| `usage.prompt_tokens` | `usage.input_tokens` | `usageMetadata.promptTokenCount` | âœ… å®Œå…¨æ”¯æŒ |
| `usage.completion_tokens` | `usage.output_tokens` | `usageMetadata.candidatesTokenCount` | âœ… å®Œå…¨æ”¯æŒ |
| `usage.total_tokens` | è®¡ç®—å¾—å‡º | `usageMetadata.totalTokenCount` | âœ… å®Œå…¨æ”¯æŒ |

### å®ŒæˆåŸå› æ˜ å°„

| OpenAIå®ŒæˆåŸå›  | Claudeå®ŒæˆåŸå›  | Geminiå®ŒæˆåŸå›  |
|----------------|----------------|----------------|
| `stop` | `end_turn/stop_sequence` | `STOP/OTHER` |
| `length` | `max_tokens` | `MAX_TOKENS` |
| `content_filter` | `content_filtered` | `SAFETY/RECITATION/PROHIBITED_CONTENT` |
| `tool_calls` | `tool_use` | `STOP` |

## é‡è¦å…¼å®¹æ€§é™åˆ¶

### Claude APIé™åˆ¶

1. **ç³»ç»Ÿæ¶ˆæ¯å¤„ç†**: æ‰€æœ‰`system`å’Œ`developer`æ¶ˆæ¯ä¼šè¢«åˆå¹¶ä¸ºå•ä¸ªç³»ç»Ÿæç¤º
2. **æ ¼å¼åŒ–è¾“å‡º**: `response_format`é€šè¿‡å·¥å…·è°ƒç”¨å®ç°ï¼Œè€ŒéåŸç”Ÿæ”¯æŒ
3. **æ¨ç†å†…å®¹**: æ”¯æŒæ¨ç†èƒ½åŠ›ï¼Œä½†OpenAI SDKæ— æ³•è¿”å›è¯¦ç»†çš„æ€è€ƒè¿‡ç¨‹
4. **ä¸æ”¯æŒçš„å‚æ•°**: `presence_penalty`, `frequency_penalty`, `n`ç­‰å‚æ•°è¢«å¿½ç•¥

### Gemini APIé™åˆ¶

1. **è§’è‰²æ˜ å°„**: `assistant`è§’è‰²æ˜ å°„ä¸º`model`
2. **å®‰å…¨è®¾ç½®**: è‡ªåŠ¨é…ç½®å®‰å…¨é˜ˆå€¼ï¼Œé¢„è§ˆæ¨¡å‹ä½¿ç”¨è¾ƒé«˜é˜ˆå€¼
3. **é¢‘ç‡æƒ©ç½š**: ä»…1.5 Proå’ŒFlashæ¨¡å‹æ”¯æŒ

### é€šç”¨é™åˆ¶

1. **é”™è¯¯æ ¼å¼**: ä¿æŒä¸OpenAI APIä¸€è‡´çš„é”™è¯¯æ ¼å¼ï¼Œä½†è¯¦ç»†é”™è¯¯ä¿¡æ¯å¯èƒ½ä¸åŒ
2. **æµå¼å“åº”**: æ”¯æŒSSEæµå¼ä¼ è¾“ï¼Œä½†å…·ä½“å®ç°ç»†èŠ‚å¯èƒ½æœ‰å·®å¼‚
3. **é€Ÿç‡é™åˆ¶**: éµå¾ªå„å‚å•†çš„åŸç”Ÿé€Ÿç‡é™åˆ¶è§„åˆ™

## æœ€ä½³å®è·µ

1. **æç¤ºè¯ä¼˜åŒ–**: å¦‚æœæ‚¨çš„æç¤ºè¯é’ˆå¯¹OpenAIè¿›è¡Œäº†å¤§é‡è°ƒä¼˜ï¼Œå»ºè®®ä½¿ç”¨TokenOPS.AIæ§åˆ¶å°çš„æç¤ºè¯æ”¹è¿›å·¥å…·
2. **é”™è¯¯å¤„ç†**: ä»…å°†é”™è¯¯ä¿¡æ¯ç”¨äºæ—¥å¿—è®°å½•å’Œè°ƒè¯•ï¼Œä¸è¦ä¾èµ–å…·ä½“çš„é”™è¯¯æ–‡æœ¬å†…å®¹
3. **åŠŸèƒ½æµ‹è¯•**: åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰ï¼Œè¯·å……åˆ†æµ‹è¯•æ‰€éœ€çš„åŠŸèƒ½ç‰¹æ€§
4. **åŸç”ŸAPI**: å¦‚éœ€ä½¿ç”¨å®Œæ•´åŠŸèƒ½é›†ï¼ˆPDFå¤„ç†ã€å¼•ç”¨ã€æ‰©å±•æ€è€ƒã€æç¤ºç¼“å­˜ç­‰ï¼‰ï¼Œå»ºè®®ä½¿ç”¨åŸç”ŸAPI

## æ”¯æŒçš„æ¨¡å‹

### Claudeæ¨¡å‹
- `claude-sonnet-4-20250514`
- `claude-opus-4-250514`
- `claude-3-7-sonnet-20250219`
- `claude-3-5-sonnet-20241022`


### Geminiæ¨¡å‹
- `gemini-2.5-pro`
- `gemini-2.5-flash`
- `gemini-2.5-flash-lite`
- `gemini-2.0-flash-lite-001`
- `gemini-2.0-flash-001`

## æ‰©å±•åŠŸèƒ½

### æ¨ç†èƒ½åŠ›æ”¯æŒ

æ‚¨å¯ä»¥é€šè¿‡æ·»åŠ `reasoning_effort`å‚æ•°æ¥å¯ç”¨æ‰©å±•æ¨ç†åŠŸèƒ½ï¼š

```python
response = client.chat.completions.create(
    model="claude-3-5-sonnet-20241022",
    messages=...,
    reasoning_effort="medium"  # low, medium, high
)
```

### å¤šæ¨¡æ€æ”¯æŒ

æ”¯æŒå›¾åƒå’Œæ–‡æ¡£è¾“å…¥ï¼ˆå–å†³äºå…·ä½“æ¨¡å‹ï¼‰ï¼š

```python
response = client.chat.completions.create(
    model="claude-3-5-sonnet-20241022",
    messages=[
        {
            "role": "user",
            "content": [
                {"type": "text", "text": "æè¿°è¿™å¼ å›¾ç‰‡"},
                {"type": "image_url", {"url": "data:image/jpeg;base64,..."}}
            ]
        }
    ]
)
```

---

å¦‚é‡åˆ°ä»»ä½•å…¼å®¹æ€§é—®é¢˜ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒã€‚